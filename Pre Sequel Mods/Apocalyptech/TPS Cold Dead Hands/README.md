TPS Cold Dead Hands
===================

This mod completely revamps the way in which weapons and shields are
acquired during the game.  Instead of dropping weapons/shields from a
random loot pool, enemies will now *always* drop the specific gun and
shield that they're using.  In the default configuration, enemy gear
quality is also improved considerably.

In general, these enhanced enemy drops are just about the *only* way to
acquire weapons and shields in the game.  Weapons and shields will not be
found in chests, and vending machines have severely restricted inventories.
Some notable exceptions include quest rewards, which are unchanged, and
larger "lootsplosion" type events generated by raid bosses, endgame rewards
and the like.

In the default configuration, this mod is a spiritual cousin of my own
Better Loot mod.  You'll be up against enemies using purples, glitches,
and even legendaries.  Gear quality can be customized easily in
BLCMM, so you can still play using something close to the stock
Borderlands gear quality.  Regardless of gear quality configuration, Badass
enemies will have better gear than their ordinary counterparts.

Grenade Mods, Class Mods, and Oz Kits will still be acquired as per usual -
via world drops, chests, and the like.

**NOTE:** This mod has a *lot* of user-configurable options (detailed below
in the "Configuration" section).  In fact, there's 61,440 theoretically-supported
permutations of the options (though to be fair, there's only about 480 which
are closely-related).  Needless to say, I have not thoroughly tested out all
combinations to ensure that everything works as it should.  If you encounter
strange behavior, definitely look me up on Discord, github, or email, with
full details of how you've got it configured, and I can take a look.

Usage/Installation
------------------

This mod must be imported into BLCMM using `File -> Import single mod`.
Choose the file `TPS Cold Dead Hands.blcm` and have at it!

Mod Details
-----------

As stated above, enemies who use guns and shields will always drop that gun
and shield.  Creatures like Stalkers or viruses/bugs/etc from Claptastic
Voyage, devices like turrets, and Eridian Guardians will NOT drop
a shield, even if they spawn with one.  Shield drops *can* be optionally
enabled for all three groups of enemies, though.

Bosses with unique drops who don't actually use weapons/shields (ie: most
"creature" enemies like X-STLK-23, machines like RK5, melee-only
bosses) will still drop their unique items as per usual.  Raid bosses, and
other large "lootsplosion" events may end up generating some guns/shields
as well.

If a weapon/shield-using boss has multiple unique drops of a weapon or
shield, they will spawn with one of those items chosen randomly, and that
will be the item that they'll drop.  So you should be able to tell right
from the start of the battle which gun you'll receive.

### Exceptions

* Moonstone chests, since they cost 40E to open, have had their loot pools
  left alone.  They will spawn gear as they always have.

* Some chests have not had their weapons/shields removed.  This list is
  probably not exhaustive, and I haven't really tested many of these to find
  out.  Regardless, the drops from these chests should be unaltered:
  * Golden Chest is completely untouched
  * Zarpedon's chest in Pity's Fall
  * Moxxi's chest in Concordia
  * The couple mission-specific chests in Research + Development
  * The three custom gear chests in Claptastic Voyage (which give the Heartfull
    Splodger, Cutie Killer, and M0RQ)
  * Spyware chest from Claptastic Voyage

* There's some strange problem with the Dahl Lost Legion soldiers in the Veins
  of Helios map which prevents them from being affected by this mod.  I honestly
  have no idea why I can't seem to hotfix them.  Boils and other enemies in the
  area are fine, though, and Lost Legion elsewhere in the game work just fine.

* Ordinarily, Lost Legion Eternal (and plain ol' Eternal) drop a weapon when they
  start ascending, but as far as I can tell there's no way to make this drop the
  SAME weapon they were using.  I ended up disabling that drop entirely -- if you
  want their weapon, be sure to kill 'em before they start ascending!  I justify
  this to myself by saying they must need the matter as part of whatever reaction
  is powering their ascension.  :)

* UCP added a chance for Deadlift to spawn the Kala, but we're not letting him
  equip/drop the Kala on Playthrough 1.  It's just too hard a fight for that stage
  of the game.  He'll have a chance to equip/drop it on TVHM+, and I've also set
  Nel to be able to equip/drop the Kala to compensate.

### Configuration

There are several categories you can use to customize various aspects of the
mod, when loaded into BLCMM:

* **Legendary Loot Pool Improvements**: This section improves the global legendary pool
  by adding all uniques and glitch uniques.  (There are only two Glitch
  uniques: the Heartfull Splodger and the Cutie Killer).  Those options can
  be toggled individually.

* **Rocket Launchers in Global Equip Pools**: By default, this mod adds in rocket
  launchers to the main enemy equip pools.  This is generally fine in Normal (though
  it will make for some more challenging fights), but in UVHM especially it can get
  a bit much.  This section will let you decide how likely rocket-launcher-using
  enemies are: from Full (about 6.7%), down to not allowing launcher use at all.
  (Enemies which are specifically set to use rocket launchers will still use RLs
  regardless, of course.)

* **Enemy Gear Quality**: This is another mutually-exclusive category,
  and defines how good the enemy gear is.  The default ("Excellent Gear") is
  more or less at the Better Loot mod's "Lootsplosion" levels, so high-level
  gear will be extremely common.  Remember that guns and shields aren't easily
  acquireable outside of enemy equipment, so choosing the "Stock" preset here
  may hamper your own gear loadout.  Epic treasure chests will no longer help
  out, etc.

* **Rarity Drop Rates**: This is another mutually-exclusive category.  In the
  default configuration, enemies will *always* drop the weapon+shield that they
  have equipped.  To give a percent chance of dropping the lower rarities, to
  prevent an overabundance of unwanted gear, you can opt to do so in here.
  Purples, Glitches, and Legendaries will always drop, though.
  Selecting this option makes the drops in TPS pretty similar to BL1-style drops.

* **Boss Unique Weapon Frequency**: This is another mutually-exclusive
  category, so you can only choose one option.  It will let you choose how
  often bosses will equip/drop their unique loot.  The default is
  "guaranteed," which is what the Better Loot mod does in "Lootsplosion,"
  but you can scale that back all the way to the stock values.

* **Add More Shields to Early-Game Enemies**: By default, in Normal mode,
  enemies in the early-to-mid game (apart from the very first intro level)
  generally don't have shields, which would make shield acquisition difficult
  with this mod.  Selecting this option (which is enabled by default) will
  give most early-game Scavs and Darksiders the possibility of spawning with
  a shield (though the shield chances will be less than they would be in
  TVHM or UVHM).

* **Stalker Shield Behavior**: In the default configuration, Stalkers behave
  just like they always have in BL2: they have a shield, but it's not a "real"
  shield and won't drop.  If you prefer, though, you can toggle stalker
  shields so that they work like other shielded enemies with Cold Dead Hands,
  so you'll get stalkers using Novas and Maylay shields, and they'll drop them
  when killed.

* **Eridian Guardian Shield Behavior**: In the default configuration, Eridian
  Guardians will just use their default shield, and not drop any.  Like
  Stalkers, they can optionally be set to equip and drop "real" shields.

* **Claptastic Voyage Creature Shield Behavior**: As with Stalkers and
  Eridian Guardians, by default the creatures from the Claptastic Voyage DLC
  (viruses, bugs, glitches, etc) will not equip or drop "real" shields.
  That can optionally be toggled on in here.

* **Provide Common Pistols for "To Arms!" Mission?**: This has been copied
  over from my Better Loot mod for the same reason: when the loot quality has
  been improved as much as this mod makes it possible, the mission "To Arms!"
  can become extremely difficult to complete while using this mod.  To
  compensate, you can optionally have this mod provide four chests containing
  three common pistols each, in the same room as the drop location.  This
  should compensate nicely for hardly ever getting common items ingame.

* **Remove Level-Based Loot Restrictions**: This Allows all weapon, shield,
  grenade, COM, shield, ozkit, and ammo types from the very beginning of the
  game.  If you have the quality of gear pumped up, it's possible that some
  early-game enemies might not otherwise be properly equipped unless you've got
  something like this which unlocks everything.  This is a duplicate of my
  TPS Early Bloomer mod, and is also included inside TPS Better Loot, though
  there's no problems with having it enabled in multiple places.  Note that
  some early-game gear is already unlocked in the main area of the mod, so
  this just goes a few steps further.

Additionally, there's one category in the "Main Mod" section which you may
be interested in:

* `Main Mod -> Disable World Weapon/Shield Drops -> Remove Weapons and Shields
  from Containers`: This section is what removes all weapons/shields from
  treasure chests and other containers in the game.  If this bothers you, feel
  free to uncheck this option.  (This might be especially useful if you've
  opted to keep some of the stock rarity values, or disabled rocket launchers
  in the global equip pools, etc.)

### Implications

* Remember that with this mod active, mods which provide buffs to weapons
  will help your opponents as well as yourself.  You may not want to have
  any super-OP gear in your active mod list, unless you're looking for a
  real challenge.  This is sometimes offset by the enemy AI not really
  knowing how to use better gear efficiently, though for very powerful
  weapons, that's not much help.

* Weapons and Shields ordinarily found in treasure chests have been replaced
  with the main ammo/money/eridium pool, rather than removed outright,
  because otherwise the probabilities of getting grenade mods, COMs, and
  oz kits would be greatly buffed.  So you'll have to get used to epic chests
  opening up to find a handful of dollars and some pistol ammo.  (Also note
  that as of right now, the extra ammo/money won't be aligned properly within
  the chest.  Them's the breaks, currently.)

* Keep in mind that areas which are creature-heavy (such as Serenity's Waste,
  Eleseer, and some areas of the Claptastic Voyage DLC) will be pretty weak
  in the loot front, since weapons and shields will generally not be found
  in those areas.

Compatibility
-------------

This mod is fully compatible with UCP.

This will obviously conflict with other mods with similar aims.

This mod overwrites/disables much of the functionality in my own "Better
Loot" mod, but it's designed to work fine with both enabled (so long as
this mod appears later in your patch file).  The "Better Loot" improvements
to Class Mods, Grenades, Oz Kits, Raid Boss drops, etc, should help out
against the increased enemy difficulty here, in fact.

My own "Early Bloomer" mod will unlock all gear from the beginning of the
game, so enable that if you want early-game bandits to have the best gear
possible.  Note that Better Loot already includes Early Bloomer, so if
you're running Better Loot, you wouldn't have to bother.

Mod Construction / Implementation Details
-----------------------------------------

*(This section is only relevant for someone looking to edit the mod in the
same way I do, or just someone curious about my mod construction techniques.
If you're just looking to run the mod, see the "Usage" section above.  The
mod can, of course, be edited directly in BLCMM as well, once it's
been imported.)*

This mod is generated using Python script named `generate-mod.py`.
The script makes use of `modprocessor.py` from my Borderlands 2 mod
directory.  You'll need to copy (or symlink, if you're on Mac or Linux)
`modprocessor.py` into this directory in order to run the script.

Bugs
====

Known issues with the mod:

* When guns/shields inside chests get replaced by money/ammo, the money/ammo
  orientation is wrong - they sort of "stick up" from the chest in an
  unnatural-looking way.  For now I'm just coping; there's a couple different
  ways to fix that (enumerated below) but I don't particularly care to do
  either at the moment.

* Dahl Lost Legion inside the Veins of Helios don't have this mod applied.
  Hotfixes against their `AIPawnBalanceDefinition` objects just seem to get
  totally ignored.  I could work around this by redirecting the "stock" equip
  pools to my custom ones, but I'd been purposefully leaving those alone in
  case anything else was using them.  I don't *think* that should be the case,
  but I'll have to do some digging.

Ideas/TODO
==========

Things to think about:

* Restrict weapon manufacturer by level?  (Only Dahl in Lunar Launching Station, etc?)
* Might be nifty to restrict weapon manufacturer by enemy type, though that
  would require eating up more skinpools (the by-level idea could reuse all
  of ours w/ hotfixes)
* Fix orientation of items spawning in chests?  There's two ways to do this:
  1. Update the `RelativeRotation` attribute inside the appropriate
     `SkeletalMeshSocket` objects.  The danger here is the handful of
     chests which *do* still spawn guns - we'd have to make sure those still
     look okay.
  2. Update each chest pool configuration so that the attachments which used
     to spawn weapons/shields attach to different locations, or just not at
     all.  The problem here is that's just a fair amount of busywork I don't
     care to do.

Licenses
========

The `generate-source.py` script itself is licensed under the
[3-clause BSD license](https://opensource.org/licenses/BSD-3-Clause),
which should be permissive enough to do just about whatever with.

The mod itself is licensed under
[Public Domain / CC0 1.0 Universal](https://creativecommons.org/publicdomain/zero/1.0/).

See [COPYING-code.txt](../COPYING-code.txt) and [COPYING-mods.txt](../COPYING-mods.txt)
for the full text.

Changelog
=========

**v1.1.2**, *unreleased*:
 * Nothing yet

**v1.1.1**, August 21, 2019 (commit `e43b84c7b7eaa2370e2ee07c44ee931512a7e263`):
 * Added the Heart Breaker as a potential legendary shotgun

**v1.1.0**, July 27, 2018 (commit `889a322f5f4e370ad3ccbad14395355b590bda9d`):
 * Converted to BLCM format *(BLCMM is now required; FilterTool is not supported)*
 * Added more options for rocket launcher equip chances other than the binary
   choice from previous versions.
 * Added in my TPS Early Bloomer mod to enable all item/weapon types from the
   very beginning of the game
 * Forced some early-game unlocks from Early Bloomer to be active at all times,
   regardless of whether that option is selected
 * Alphabetized a few categories which were in need of it (mostly in the
   categories which deal with specific enemies)

**v1.0.0**, July 9, 2018 (commit `502a6d1e2a96a76750299b930e267074e6dc260e`):
 * Initial public release
